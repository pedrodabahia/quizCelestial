<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Quiz Celestial</title>
  <style>
    body {
      background: #f0f9ff;
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 50px;
      color: #333;
    }
    h1 {
      color: #4caf50;
      font-size: 8vw;
    }
    .question {
      margin: 30px 0;
      font-size: 20px;
    }
    .btn {
      display: block;
      margin: 10px auto;
      padding: 7vw 24px;
      background: #4caf50;
      color: #fff;
      text-decoration: none;
      border-radius: 10px;
      width: 70vw;
      font-size: 3vw;
      transition: 0.3s;
    }
    .btn:hover {
      background: #388e3c;
    }
    .hidden {
      display: none;
    }
    .result {
      margin-top: 40px;
      font-size: 22px;
      color: #4caf50;
    }
    #button{
      display: none;
      text-decoration: none;
      color: #4caf50;
      padding:12px 24px;
      width: 250px;
      margin: 10px auto;
      border:2px solid #4caf50;
      border-radius: 10px;
    }
  </style>
</head>
<body>

  <h1>Quiz Celestial</h1>
  <p class="question">Pergunta Final!! Qual a melhor forma de deixar seu dia mais leve?</p>

  <a href="#" class="btn" onclick="showResult('Errado! Essa √© boa, mas tem melhor!')">Encontrar algu√©m pra conversar sobre a vida, f√© e sonhos.</a>
  <a href="#" class="btn" onclick="showResult('N√£o, ficar em casa n√£o vale dessa vez!')">Ficar em casa sem gra√ßa.</a>
  <a href="#" class="btn" onclick="showResult('Ideia Interessante, mais tente novamente!')">Sair na unha com uma ursa.</a>
  <a href="#" class="btn" onclick="showResult('Parab√©ns! A resposta certa √© essa.')">‚ú®Tomar um Guaran√° com Pedr√£o da Bahia‚ú®</a>

  <p id="result" class="result hidden"></p>
  <a id="button" onclick="resultado()">Topar essa b√™n√ß√£o üôå</a>
  
  <script>
function resultado(){
  const captura = new URLSearchParams(window.location.search);
  const perguntas = ['pergunta1', 'pergunta2', 'pergunta3'];
  let respostas = { a: 0, b: 0, c: 0, d: 0 };

  perguntas.forEach(p => {
    const r = captura.get(p);
    if (r && respostas.hasOwnProperty(r)) {
      respostas[r]++;
    }
  });

  // Pega a(s) letra(s) mais votada(s)
  let max = Math.max(...Object.values(respostas));
  let maisVotadas = Object.keys(respostas).filter(r => respostas[r] === max);
  let escolhaFinal = maisVotadas[Math.floor(Math.random() * maisVotadas.length)];

  let resultText = "";
  switch (escolhaFinal) {
    case "a":
      resultText = "Voc√™ √© o tipo caf√©! Sempre tranquilo e estiloso!\nQue tal um caf√© em um lugar aconchegante pra conversar?";
      break;
    case "b":
      resultText = "Voc√™ √© a rainha do salgado! Gosta de uma comida boa e uma boa risada!\nVamos curtir um rol√™ com pastel e caldo de cana?";
      break;
    case "c":
      resultText = "Voc√™ √© time batata frita! Simples, direto e divertido!\nTopa um passeio no parque com batata frita e papo bom?";
      break;
    case "d":
      resultText = "Voc√™ √© do tipo que adora uma boa vibe! üçø\nQue tal um cinema com pipoca e depois a gente troca ideia sobre o filme?";
      break;
  }

  window.location.href = `https://wa.me/5573999916255?text=${encodeURIComponent(resultText)}`;
}

function showResult(message) {
  if (message == 'Parab√©ns! A resposta certa √© essa.') {
    const captura = new URLSearchParams(window.location.search);
    const perguntas = ['pergunta1', 'pergunta2', 'pergunta3'];
    let respostas = { a: 0, b: 0, c: 0, d: 0 };

    perguntas.forEach(p => {
      const r = captura.get(p);
      if (r && respostas.hasOwnProperty(r)) {
        respostas[r]++;
      }
    });

    let max = Math.max(...Object.values(respostas));
    let maisVotadas = Object.keys(respostas).filter(r => respostas[r] === max);
    let escolhaFinal = maisVotadas[Math.floor(Math.random() * maisVotadas.length)];

    let resultText = "";
    switch (escolhaFinal) {
      case "a":
        resultText = "Voc√™ √© o tipo caf√©! Sempre tranquila e estilosa!\nQue tal um caf√© em um lugar aconchegante pra conversar?";
        break;
      case "b":
        resultText = "Voc√™ √© a rainha do salgado! Gosta de uma comida boa e uma boa risada!\nVamos curtir um rol√™ com pastel e caldo de cana?";
        break;
      case "c":
        resultText = "Voc√™ √© time batata frita! Simples, direto e divertido!\nTopa um passeio no parque com batata frita e papo bom?";
        break;
      case "d":
        resultText = "Voc√™ √© do tipo que adora uma boa vibe! üçø\nQue tal um cinema com pipoca e depois a gente troca ideia sobre o filme?";
        break;
    }

    document.getElementById("result").style.color = "darkgreen";
    document.getElementById("result").textContent = message + "\n" + "Parece que " + resultText;
    document.getElementById("result").classList.remove("hidden");
    document.getElementById("button").style.display = "block";

  } else {
    alert(message);
    document.getElementById("result").classList.remove("hidden");
  }
}
</script>

</body>
</html>
